var Jt=Object.defineProperty,Kt=(t,e,i)=>e in t?Jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,K=(t,e,i)=>(Kt(t,typeof e!="symbol"?e+"":e,i),i),gt=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},n=(t,e,i)=>(gt(t,e,"read from private field"),i?i.call(t):e.get(t)),r=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},h=(t,e,i,s)=>(gt(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i),l=(t,e,i)=>(gt(t,e,"access private method"),i),q,m,g,S,Y,_,M,y,P,T,C,Q,b,U,H,E,v,rt,yt,at,Pt,ht,Tt,ct,Ht,dt,Lt,pt,Dt,wt,Ot,F,et,O,R,A,G,W,N,_t,At,vt,Ft,it,St,ut,qt,nt,It,p,k,w,I,Z,kt,f,ft,Bt,j,xt,Ct,Vt,z,mt;const tt=500,Qt=300,Xt={time:300,distance:15,duration:2500,deceleration:.0015},ot={duration:300},lt={speed:20,discreteTime:400},Ut={selectedIndexes:[],usePointerEvents:!1,scrollShape:"scale",moveThreshold:20,momentum:Xt,itemClassName:"mobile-picker-view-item",clickToSelect:!1,mouseWheel:!1,onlyLeftButton:!0};function J(t){return typeof window!="undefined"&&window.navigator?!!navigator.userAgent.match(t):!1}const Zt=J(/safari/i)&&!J(/chrome/i)&&!J(/android/i),jt=J(/iP(ad|od|hone)/i),Yt="picker-drag-start",$t="picker-dragging";function L(t,e,i){return Math.min(Math.max(t,e),i)}function te(t,e){return L(t||0,0,e)}function st(t,e,i){return t>i||t<e}function ee(t,e,i,s){const o=t-e,a=Math.abs(o)/i,{deceleration:d}=s,c=a/d*(o<0?-1:1);return Math.round(c)}const ie=15,ne=.1;function se(t){if(!!(t!=null&&t.length))for(let e=0;e<t.length;e++){const i=t[e];i.style.transform="none"}}function oe(t,e,i){if(!!(i!=null&&i.length))for(let s=0;s<i.length;s++){const o=i[s],a=1-ne*Math.abs(t/e+s);o.style.transform=`scale(${a.toFixed(2)})`}}function le(t,e,i){if(!!(i!=null&&i.length))for(let s=0;s<i.length;s++){const o=i[s],a=ie*(t/e+s);o.style.transform=`rotateX(${a.toFixed(0)}deg)`}}const Et={flat:null,scale:oe,rotate:le};function re(t){return 1-Math.pow(1-t,3)}function ae({startPoi:t,duration:e,destPoi:i,onRunning:s,onEnd:o}){const a=performance.now();let d=t,c=-1,u=!1;const x=V=>{if(u)return;const D=V-a,X=Math.min(D/e,1),$=re(X);d=t+(i-t)*$,s(d),X<1?c=requestAnimationFrame(x):o()};return c=requestAnimationFrame(x),{cancel:()=>{u||(u=!0,cancelAnimationFrame(c))}}}function bt(t){if(t.length===0)return;const e=t.item(0);if(!!e)return{clientX:e.clientX,clientY:e.clientY}}const Mt=t=>{if("clientX"in t&&"clientY"in t)return{clientX:t.clientX,clientY:t.clientY};if("touches"in t){const e=bt(t.touches);if(e)return e}if("changedTouches"in t){const e=bt(t.changedTouches);if(e)return e}},he=t=>typeof t=="function";function ce(t,e){let i=null;for(;t&&!i;)(t==null?void 0:t.matches)&&t.matches(e)&&(i=t),t=t.parentNode;return i}function de(t,e){let i=0;if(!t||!t.parentNode)return-1;let s=t.previousElementSibling;for(;s;)(!e||s.matches(e))&&i++,s=s.previousElementSibling;return i}const Nt={listContainerHeight:0,itemHeight:0,minScrollY:0,maxScrollY:0,limitMinScrollY:0,limitMaxScrollY:0};class ue{constructor(e,i){r(this,rt),r(this,at),r(this,ht),r(this,ct),r(this,dt),r(this,pt),r(this,wt),r(this,F),r(this,O),r(this,A),r(this,W),r(this,_t),r(this,vt),r(this,it),r(this,ut),r(this,nt),r(this,p),r(this,w),r(this,Z),r(this,q,!1),r(this,m,0),r(this,g,null),K(this,"metaInfo",Nt),r(this,S,null),r(this,Y,null),r(this,_,null),r(this,M,null),r(this,y,null),r(this,P,null),r(this,T,void 0),r(this,C,void 0),K(this,"innerSelectedIndex",0),r(this,Q,-1),r(this,b,null),r(this,U,void 0),r(this,H,void 0),r(this,E,null),r(this,v,""),this.rootNode=e,this.options=i,h(this,T,i.usePointerEvents?"PointerEvent"in window&&(!Zt||jt):!1),h(this,C,i.momentum===!1?!1:{...Xt,...i.momentum}),h(this,U,l(this,rt,yt).call(this,i.clickToSelect)),h(this,H,l(this,at,Pt).call(this,i.mouseWheel)),l(this,ct,Ht).call(this),l(this,dt,Lt).call(this),h(this,v,"init"),this.setIndex(this.options.selectedIndex);const{items:s,itemHeight:o}=this.metaInfo;s&&(h(this,E,l(this,ht,Tt).call(this,i.scrollShape,s)),n(this,E)?n(this,E).call(this,n(this,m),o,s):se(s))}setIndex(e,i=0){var s;if(!((s=this.metaInfo.items)!=null&&s.length))return this.innerSelectedIndex;h(this,v,n(this,v)||"api");const o=te(e,this.metaInfo.items.length-1);if(this.innerSelectedIndex!==o){l(this,p,k).call(this,{duration:i});const a=l(this,ut,qt).call(this,o);l(this,w,I).call(this,a),l(this,F,et).call(this,o)}return o}destroy(){var e,i,s,o,a;l(this,Z,kt).call(this),(e=n(this,M))==null||e.abort(),h(this,M,null),(i=n(this,y))==null||i.abort(),h(this,y,null),(s=n(this,P))==null||s.abort(),h(this,P,null),h(this,v,""),this.metaInfo=Nt,l(this,p,k).call(this),l(this,w,I).call(this,0),(a=(o=n(this,b))==null?void 0:o.cancel)==null||a.call(o),h(this,b,null)}}q=new WeakMap;m=new WeakMap;g=new WeakMap;S=new WeakMap;Y=new WeakMap;_=new WeakMap;M=new WeakMap;y=new WeakMap;P=new WeakMap;T=new WeakMap;C=new WeakMap;Q=new WeakMap;b=new WeakMap;U=new WeakMap;H=new WeakMap;E=new WeakMap;v=new WeakMap;rt=new WeakSet;yt=function(t){return t?t===!0?{...ot,enable:!0}:{...ot,...t,enable:!0}:{...ot,enable:!1}};at=new WeakSet;Pt=function(t){return t?t===!0?{...lt,enable:!0}:{...lt,...t,enable:!0}:{...lt,enable:!1}};ht=new WeakSet;Tt=function(t,e){let i=Et.flat;return(e==null?void 0:e.length)>3&&(i=he(t)?t:Et[t]),i};ct=new WeakSet;Ht=function(){const t=this.rootNode.firstElementChild,e=t==null?void 0:t.firstElementChild;if(n(this,q)||!e)return;const i=0,s=-t.offsetHeight+e.offsetHeight;this.metaInfo={itemContainer:t,items:t.children,listContainerHeight:t.offsetHeight,itemHeight:e.offsetHeight,maxScrollY:i,minScrollY:s,limitMinScrollY:s-this.options.moveThreshold,limitMaxScrollY:i+this.options.moveThreshold}};dt=new WeakSet;Lt=function(){var t,e,i,s,o;h(this,M,new AbortController),n(this,T)?this.rootNode.addEventListener("pointerdown",l(this,O,R).bind(this),{signal:(t=n(this,M))==null?void 0:t.signal}):(this.rootNode.addEventListener("touchstart",l(this,O,R).bind(this),{signal:(e=n(this,M))==null?void 0:e.signal}),this.rootNode.addEventListener("mousedown",l(this,O,R).bind(this),{signal:(i=n(this,M))==null?void 0:i.signal})),h(this,y,new AbortController),this.metaInfo.itemContainer.addEventListener("transitionend",l(this,_t,At).bind(this),{signal:(s=n(this,y))==null?void 0:s.signal});const{enable:a,duration:d}=n(this,U);if(a){const{itemClassName:c}=this.options;this.rootNode.addEventListener("click",u=>{if(n(this,q))return;const x=ce(u.target,"."+c);if(x){const B=de(x,"."+c);h(this,v,"click"),this.setIndex(B,d)}})}n(this,H).enable&&(h(this,P,new AbortController),this.rootNode.addEventListener("wheel",c=>{c.preventDefault(),c.stopPropagation(),l(this,pt,Dt).call(this,c)},{signal:(o=n(this,P))==null?void 0:o.signal}))};pt=new WeakSet;Dt=function(t){const{deltaY:e,deltaMode:i}=t;let s=0;i===1?s=-e*n(this,H).speed:s=-e;const{limitMinScrollY:o,limitMaxScrollY:a,minScrollY:d,maxScrollY:c}=this.metaInfo;let u=n(this,m)+s;st(u,d,c)&&(u=L(n(this,m)+s/3,o,a)),l(this,p,k).call(this,{duration:Qt}),l(this,w,I).call(this,u),l(this,wt,Ot).call(this)};wt=new WeakSet;Ot=function(){window.clearTimeout(n(this,Q)),h(this,Q,window.setTimeout(()=>{const{index:t,y:e}=l(this,it,St).call(this,n(this,m)),{limitMinScrollY:i,limitMaxScrollY:s}=this.metaInfo,o=L(e,i,s);l(this,p,k).call(this,{duration:tt}),l(this,w,I).call(this,o),h(this,v,"wheel"),l(this,F,et).call(this,t)},n(this,H).discreteTime))};F=new WeakSet;et=function(t){l(this,vt,Ft).call(this,t),this.options.onChange(t,n(this,v))};O=new WeakSet;R=function(t){var e,i;const s=Mt(t);if(n(this,S)||!s||this.options.onlyLeftButton&&t.type==="mousedown"&&t.button!==0)return;l(this,p,k).call(this),(i=(e=n(this,b))==null?void 0:e.cancel)==null||i.call(e),h(this,b,null),this.rootNode.classList.add(Yt),h(this,S,{time:Date.now(),startY:s.clientY,pointY:s.clientY});const o=t.target;h(this,g,o.ownerDocument),h(this,Y,new AbortController),h(this,_,new AbortController),n(this,T)?(this.rootNode.setPointerCapture(t.pointerId),n(this,g).addEventListener("pointermove",l(this,A,G).bind(this),{signal:n(this,Y).signal}),n(this,g).addEventListener("pointerup",l(this,W,N).bind(this),{signal:n(this,_).signal}),n(this,g).addEventListener("pointercancel",l(this,W,N).bind(this),{signal:n(this,_).signal})):(n(this,g).addEventListener("mousemove",l(this,A,G).bind(this),{signal:n(this,Y).signal}),n(this,g).addEventListener("touchmove",l(this,A,G).bind(this),{signal:n(this,Y).signal}),n(this,g).addEventListener("mouseup",l(this,W,N).bind(this),{signal:n(this,_).signal}),n(this,g).addEventListener("touchend",l(this,W,N).bind(this),{signal:n(this,_).signal}),n(this,g).addEventListener("touchcancel",l(this,W,N).bind(this),{signal:n(this,_).signal}))};A=new WeakSet;G=function(t){const e=Mt(t);if(!this.rootNode||!n(this,S)||!e)return;this.rootNode.classList.remove(Yt),this.rootNode.classList.add($t);const{pointY:i}=n(this,S),s=e.clientY-i;n(this,S).pointY=e.clientY;const{minScrollY:o,maxScrollY:a,limitMinScrollY:d,limitMaxScrollY:c}=this.metaInfo;let u=n(this,m)+s;st(u,o,a)&&(u=L(n(this,m)+s/3,d,c)),l(this,w,I).call(this,u)};W=new WeakSet;N=function(t){if(!this.rootNode||!n(this,S))return;n(this,T)&&this.rootNode.releasePointerCapture(t.pointerId);let e=0,i=tt,s=n(this,m);const{limitMinScrollY:o,limitMaxScrollY:a,minScrollY:d,maxScrollY:c}=this.metaInfo,u=l(this,nt,It).call(this);let x=!1;if(u)s=u;else{const D=Mt(t),{time:X,startY:$,pointY:Rt}=n(this,S),Wt=Date.now()-X,Gt=Math.abs(Math.round(D.clientY)-$);if(n(this,C)&&Wt<n(this,C).time&&Gt>n(this,C).distance){x=!0;const zt=ee(Rt,$,Wt,n(this,C));i=n(this,C).duration,s=n(this,m)+zt,st(s,d,c)&&(i=tt)}}const{index:B,y:V}=l(this,it,St).call(this,s);s=V,e=B,s!==n(this,m)&&(h(this,v,"drag"),s=L(s,o,a),x?(l(this,p,k).call(this,{duration:i,setProp:!1}),h(this,b,ae({startPoi:n(this,m),duration:i,destPoi:s,onRunning:D=>{l(this,w,I).call(this,D)},onEnd:()=>{l(this,w,I).call(this,V)}}))):(l(this,p,k).call(this,{duration:i}),l(this,w,I).call(this,s)),l(this,F,et).call(this,e)),l(this,Z,kt).call(this)};_t=new WeakSet;At=function(){const t=l(this,nt,It).call(this);t===null?l(this,p,k).call(this):(l(this,p,k).call(this,{duration:tt}),l(this,w,I).call(this,t))};vt=new WeakSet;Ft=function(t){this.innerSelectedIndex=t};it=new WeakSet;St=function(t){var e;if(!((e=this.metaInfo.items)!=null&&e.length))return{index:-1,y:0};const{itemHeight:i,items:s}=this.metaInfo;let o=-1,a=0;const d=Math.min(0,t);return o=L(Math.round(Math.abs(d)/i),0,s.length-1),a=o*i*(d/(Math.abs(d)||1)),{index:o,y:a}};ut=new WeakSet;qt=function(t){var e;if(!((e=this.metaInfo.items)!=null&&e.length))return 0;const{itemHeight:i}=this.metaInfo;return-t*i};nt=new WeakSet;It=function(){let t=null;const{minScrollY:e,maxScrollY:i}=this.metaInfo;return st(n(this,m),e,i)&&(t=n(this,m)>i?i:e),t};p=new WeakSet;k=function(t){const e=(t==null?void 0:t.duration)||0,i=(t==null?void 0:t.setProp)!==!1;h(this,q,e>0),i&&this.rootNode.style.setProperty("--picker-transit-duration",`${e}ms`)};w=new WeakSet;I=function(t){if(!this.rootNode||n(this,m)===t)return;this.rootNode.style.setProperty("--picker-transit-y",`${t}px`),h(this,m,t);const{items:e,itemHeight:i}=this.metaInfo;n(this,E)&&n(this,E).call(this,t,i,e)};Z=new WeakSet;kt=function(){var t,e;this.rootNode.classList.remove(Yt),this.rootNode.classList.remove($t),h(this,S,null),(t=n(this,Y))==null||t.abort(),h(this,Y,null),(e=n(this,_))==null||e.abort(),h(this,_,null)};class me{constructor(e,i){if(r(this,ft),r(this,j),r(this,Ct),r(this,z),K(this,"rootNode"),K(this,"innerOptions"),r(this,f,[]),this.rootNode=typeof e=="string"?document.querySelector(e):e,!this.rootNode)throw new Error("root node not found");this.innerOptions={...Ut,...i},l(this,ft,Bt).call(this)}setIndexes(e){this.innerOptions.selectedIndexes=e;const i=[];return e.forEach((s,o)=>{n(this,f)[o]&&i.push(n(this,f)[o].setIndex(s))}),i}refreshAll(e){const i=this.rootNode.querySelectorAll(".mobile-picker-view");return i.length?(this.innerOptions.selectedIndexes.length=i.length,n(this,f).forEach(s=>s.destroy()),n(this,f).length=i.length,this.refreshColumns(n(this,f).map((s,o)=>o),e)):l(this,z,mt).call(this)}refreshColumns(e,i){const s=this.rootNode.querySelectorAll(".mobile-picker-view");return s.length?(e.forEach(o=>{const a=s[o];a&&n(this,f)[o]&&(n(this,f)[o].destroy(),n(this,f)[o]=l(this,j,xt).call(this,a,i||this.innerOptions.selectedIndexes,o))}),this.innerOptions.selectedIndexes=n(this,f).map(o=>o.innerSelectedIndex),this.innerOptions.selectedIndexes):l(this,z,mt).call(this)}}f=new WeakMap;ft=new WeakSet;Bt=function(t){var e,i;const s=this.rootNode.querySelectorAll(".mobile-picker-view");this.innerOptions.selectedIndexes.length=s.length,s.forEach((a,d)=>{const c=l(this,j,xt).call(this,a,t||this.innerOptions.selectedIndexes,d);n(this,f).push(c)}),this.innerOptions.selectedIndexes=n(this,f).map(a=>a.innerSelectedIndex);const o=((i=(e=n(this,f)[0])==null?void 0:e.metaInfo)==null?void 0:i.itemHeight)||0;o>0&&this.rootNode.style.setProperty("--picker-item-height",`${o}px`)};j=new WeakSet;xt=function(t,e,i){return new ue(t,{...this.innerOptions,selectedIndex:e[i],onChange:(o,a)=>{l(this,Ct,Vt).call(this,o,a,i)}})};Ct=new WeakSet;Vt=function(t,e,i){var s,o;this.innerOptions.selectedIndexes[i]=t,(o=(s=this.innerOptions).onChange)==null||o.call(s,this.innerOptions.selectedIndexes,e,i)};z=new WeakSet;mt=function(){return this.innerOptions.selectedIndexes=[],n(this,f).forEach(t=>t.destroy()),h(this,f,[]),[]};export{me as P};
