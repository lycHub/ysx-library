var zt=Object.defineProperty,Jt=(t,e,i)=>e in t?zt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,B=(t,e,i)=>(Jt(t,typeof e!="symbol"?e+"":e,i),i),ft=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},n=(t,e,i)=>(ft(t,e,"read from private field"),i?i.call(t):e.get(t)),r=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},a=(t,e,i,s)=>(ft(t,e,"write to private field"),s?s.call(t,i):e.set(t,i),i),o=(t,e,i)=>(ft(t,e,"access private method"),i),K,f,g,v,Y,w,C,y,P,T,x,$,R,H,E,_,ot,Nt,lt,yt,rt,Pt,ht,Tt,at,Ht,mt,Dt,gt,Lt,A,Q,L,F,O,q,W,N,U,pt,wt,Ot,Z,_t,ct,At,j,vt,p,I,S,k,G,St,u,dt,Ft,z,It,kt,qt,V,ut;const J=500,Kt=300,Vt={time:300,distance:20,duration:2e3,deceleration:.002},nt={duration:300},st={speed:20,discreteTime:400},Qt={selectedIndexes:[],usePointerEvents:!1,scrollShape:"scale",moveThreshold:20,momentum:Vt,itemClassName:"mobile-picker-view-item",clickToSelect:!1,mouseWheel:!1};function X(t){return typeof window!="undefined"&&window.navigator?!!navigator.userAgent.match(t):!1}const Ut=X(/safari/i)&&!X(/chrome/i)&&!X(/android/i),Zt=X(/iP(ad|od|hone)/i),xt="picker-drag-start",Xt="picker-dragging";function D(t,e,i){return Math.min(Math.max(t,e),i)}function jt(t,e){return D(t||0,0,e)}function tt(t,e,i){return t>i||t<e}function te(t,e,i,s){const l=t-e,h=Math.abs(l)/i,{deceleration:d}=s,c=h/d*(l<0?-1:1);return Math.round(c)}const ee=15,ie=.1;function ne(t){if(!!(t!=null&&t.length))for(let e=0;e<t.length;e++){const i=t[e];i.style.transform="none"}}function se(t,e,i){if(!!(i!=null&&i.length))for(let s=0;s<i.length;s++){const l=i[s],h=1-ie*Math.abs(t/e+s);l.style.transform=`scale(${h.toFixed(2)})`}}function oe(t,e,i){if(!!(i!=null&&i.length))for(let s=0;s<i.length;s++){const l=i[s],h=ee*(t/e+s);l.style.transform=`rotateX(${h.toFixed(0)}deg)`}}const Wt={flat:null,scale:se,rotate:oe};function le(t){return 1-Math.pow(1-t,3)}function re({startPoi:t,duration:e,destPoi:i,onRunning:s,onEnd:l}){const h=performance.now();let d=t;const c=m=>{const M=m-h,b=Math.min(M/e,1),et=le(b);d=t+(i-t)*et,s(d),b<1?requestAnimationFrame(c):l()};requestAnimationFrame(c)}function Et(t){if(t.length===0)return;const e=t.item(0);if(!!e)return{clientX:e.clientX,clientY:e.clientY}}const Yt=t=>{if("clientX"in t&&"clientY"in t)return{clientX:t.clientX,clientY:t.clientY};if("touches"in t){const e=Et(t.touches);if(e)return e}if("changedTouches"in t){const e=Et(t.changedTouches);if(e)return e}},he=t=>typeof t=="function";function ae(t,e){let i=null;for(;t&&!i;)(t==null?void 0:t.matches)&&t.matches(e)&&(i=t),t=t.parentNode;return i}function ce(t,e){let i=0;if(!t||!t.parentNode)return-1;let s=t.previousElementSibling;for(;s;)(!e||s.matches(e))&&i++,s=s.previousElementSibling;return i}const bt={listContainerHeight:0,itemHeight:0,minScrollY:0,maxScrollY:0,limitMinScrollY:0,limitMaxScrollY:0};class de{constructor(e,i){r(this,ot),r(this,lt),r(this,rt),r(this,ht),r(this,at),r(this,mt),r(this,gt),r(this,A),r(this,L),r(this,O),r(this,W),r(this,U),r(this,wt),r(this,Z),r(this,ct),r(this,j),r(this,p),r(this,S),r(this,G),r(this,K,!1),r(this,f,0),r(this,g,null),B(this,"metaInfo",bt),r(this,v,null),r(this,Y,null),r(this,w,null),r(this,C,null),r(this,y,null),r(this,P,null),r(this,T,void 0),r(this,x,void 0),B(this,"innerSelectedIndex",0),r(this,$,0),r(this,R,void 0),r(this,H,void 0),r(this,E,null),r(this,_,""),this.rootNode=e,this.options=i,a(this,T,i.usePointerEvents?"PointerEvent"in window&&(!Ut||Zt):!1),a(this,x,i.momentum===!1?!1:{...Vt,...i.momentum}),a(this,R,o(this,ot,Nt).call(this,i.clickToSelect)),a(this,H,o(this,lt,yt).call(this,i.mouseWheel)),o(this,ht,Tt).call(this),o(this,at,Ht).call(this),a(this,_,"init"),this.setIndex(this.options.selectedIndex);const{items:s,itemHeight:l}=this.metaInfo;s&&(a(this,E,o(this,rt,Pt).call(this,i.scrollShape,s)),n(this,E)?n(this,E).call(this,n(this,f),l,s):ne(s))}setIndex(e,i=0){var s;if(!((s=this.metaInfo.items)!=null&&s.length))return this.innerSelectedIndex;a(this,_,n(this,_)||"api");const l=jt(e,this.metaInfo.items.length-1);if(this.innerSelectedIndex!==l){o(this,p,I).call(this,{duration:i});const h=o(this,ct,At).call(this,l);o(this,S,k).call(this,h),o(this,A,Q).call(this,l)}return l}destroy(){var e,i,s;o(this,G,St).call(this),(e=n(this,C))==null||e.abort(),a(this,C,null),(i=n(this,y))==null||i.abort(),a(this,y,null),(s=n(this,P))==null||s.abort(),a(this,P,null),a(this,_,""),this.metaInfo=bt,o(this,p,I).call(this),o(this,S,k).call(this,0)}}K=new WeakMap;f=new WeakMap;g=new WeakMap;v=new WeakMap;Y=new WeakMap;w=new WeakMap;C=new WeakMap;y=new WeakMap;P=new WeakMap;T=new WeakMap;x=new WeakMap;$=new WeakMap;R=new WeakMap;H=new WeakMap;E=new WeakMap;_=new WeakMap;ot=new WeakSet;Nt=function(t){return t?t===!0?{...nt,enable:!0}:{...nt,...t,enable:!0}:{...nt,enable:!1}};lt=new WeakSet;yt=function(t){return t?t===!0?{...st,enable:!0}:{...st,...t,enable:!0}:{...st,enable:!1}};rt=new WeakSet;Pt=function(t,e){let i=Wt.flat;return(e==null?void 0:e.length)>3&&(i=he(t)?t:Wt[t]),i};ht=new WeakSet;Tt=function(){const t=this.rootNode.firstElementChild,e=t==null?void 0:t.firstElementChild;if(n(this,K)||!e)return;const i=0,s=-t.offsetHeight+e.offsetHeight;this.metaInfo={itemContainer:t,items:t.children,listContainerHeight:t.offsetHeight,itemHeight:e.offsetHeight,maxScrollY:i,minScrollY:s,limitMinScrollY:s-this.options.moveThreshold,limitMaxScrollY:i+this.options.moveThreshold}};at=new WeakSet;Ht=function(){var t,e,i,s,l;a(this,C,new AbortController),n(this,T)?this.rootNode.addEventListener("pointerdown",o(this,L,F).bind(this),{signal:(t=n(this,C))==null?void 0:t.signal}):(this.rootNode.addEventListener("touchstart",o(this,L,F).bind(this),{signal:(e=n(this,C))==null?void 0:e.signal}),this.rootNode.addEventListener("mousedown",o(this,L,F).bind(this),{signal:(i=n(this,C))==null?void 0:i.signal})),a(this,y,new AbortController),this.metaInfo.itemContainer.addEventListener("transitionend",o(this,U,pt).bind(this),{signal:(s=n(this,y))==null?void 0:s.signal});const{enable:h,duration:d}=n(this,R);if(h){const{itemClassName:c}=this.options;this.rootNode.addEventListener("click",m=>{const M=ae(m.target,"."+c);if(M){const b=ce(M,"."+c);a(this,_,"click"),this.setIndex(b,d)}})}n(this,H).enable&&(a(this,P,new AbortController),this.rootNode.addEventListener("wheel",c=>{c.preventDefault(),c.stopPropagation(),o(this,mt,Dt).call(this,c)},{signal:(l=n(this,P))==null?void 0:l.signal}))};mt=new WeakSet;Dt=function(t){const{deltaY:e,deltaMode:i}=t;let s=0;i===1?s=-e*n(this,H).speed:s=-e;const{limitMinScrollY:l,limitMaxScrollY:h,minScrollY:d,maxScrollY:c}=this.metaInfo;let m=n(this,f)+s;tt(m,d,c)&&(m=D(n(this,f)+s/3,l,h)),o(this,p,I).call(this,{duration:Kt}),o(this,S,k).call(this,m),o(this,gt,Lt).call(this)};gt=new WeakSet;Lt=function(){window.clearTimeout(n(this,$)),a(this,$,window.setTimeout(()=>{const{index:t,y:e}=o(this,Z,_t).call(this,n(this,f)),{limitMinScrollY:i,limitMaxScrollY:s}=this.metaInfo,l=D(e,i,s);o(this,p,I).call(this,{duration:J}),o(this,S,k).call(this,l),a(this,_,"wheel"),o(this,A,Q).call(this,t)},n(this,H).discreteTime))};A=new WeakSet;Q=function(t){o(this,wt,Ot).call(this,t),this.options.onChange(t,n(this,_))};L=new WeakSet;F=function(t){const e=Yt(t);if(n(this,v)||!e)return;o(this,p,I).call(this),this.rootNode.classList.add(xt),a(this,v,{time:Date.now(),startY:e.clientY,pointY:e.clientY});const i=t.target;a(this,g,i.ownerDocument),a(this,Y,new AbortController),a(this,w,new AbortController),n(this,T)?(this.rootNode.setPointerCapture(t.pointerId),n(this,g).addEventListener("pointermove",o(this,O,q).bind(this),{signal:n(this,Y).signal}),n(this,g).addEventListener("pointerup",o(this,W,N).bind(this),{signal:n(this,w).signal}),n(this,g).addEventListener("pointercancel",o(this,W,N).bind(this),{signal:n(this,w).signal})):(n(this,g).addEventListener("mousemove",o(this,O,q).bind(this),{signal:n(this,Y).signal}),n(this,g).addEventListener("touchmove",o(this,O,q).bind(this),{signal:n(this,Y).signal}),n(this,g).addEventListener("mouseup",o(this,W,N).bind(this),{signal:n(this,w).signal}),n(this,g).addEventListener("touchend",o(this,W,N).bind(this),{signal:n(this,w).signal}),n(this,g).addEventListener("touchcancel",o(this,W,N).bind(this),{signal:n(this,w).signal}))};O=new WeakSet;q=function(t){const e=Yt(t);if(!this.rootNode||!n(this,v)||!e)return;this.rootNode.classList.remove(xt),this.rootNode.classList.add(Xt);const{pointY:i}=n(this,v),s=e.clientY-i;n(this,v).pointY=e.clientY;const{minScrollY:l,maxScrollY:h,limitMinScrollY:d,limitMaxScrollY:c}=this.metaInfo;let m=n(this,f)+s;tt(m,l,h)&&(m=D(n(this,f)+s/3,d,c)),o(this,S,k).call(this,m)};W=new WeakSet;N=function(t){if(!this.rootNode||!n(this,v))return;n(this,T)&&this.rootNode.releasePointerCapture(t.pointerId);let e=0,i=J,s=n(this,f);const{limitMinScrollY:l,limitMaxScrollY:h,minScrollY:d,maxScrollY:c}=this.metaInfo,m=o(this,j,vt).call(this);let M=!1;if(m)s=m;else{const it=Yt(t),{time:Bt,startY:Ct,pointY:$t}=n(this,v),Mt=Date.now()-Bt,Rt=Math.abs(Math.round(it.clientY)-Ct);if(n(this,x)&&Mt<n(this,x).time&&Rt>n(this,x).distance){M=!0;const Gt=te($t,Ct,Mt,n(this,x));i=n(this,x).duration,s=n(this,f)+Gt,tt(s,d,c)&&(i=J)}}const{index:b,y:et}=o(this,Z,_t).call(this,s);s=et,e=b,s!==n(this,f)&&(a(this,_,"drag"),s=D(s,l,h),M?(o(this,p,I).call(this,{duration:i,setProp:!1}),re({startPoi:n(this,f),duration:i,destPoi:s,onRunning:it=>{o(this,S,k).call(this,it)},onEnd:()=>{o(this,U,pt).call(this)}})):(o(this,p,I).call(this,{duration:i}),o(this,S,k).call(this,s)),o(this,A,Q).call(this,e)),o(this,G,St).call(this)};U=new WeakSet;pt=function(){const t=o(this,j,vt).call(this);t===null?o(this,p,I).call(this):(o(this,p,I).call(this,{duration:J}),o(this,S,k).call(this,t))};wt=new WeakSet;Ot=function(t){this.innerSelectedIndex=t};Z=new WeakSet;_t=function(t){var e;if(!((e=this.metaInfo.items)!=null&&e.length))return{index:-1,y:0};const{itemHeight:i,items:s}=this.metaInfo;let l=-1,h=0;const d=Math.min(0,t);return l=D(Math.round(Math.abs(d)/i),0,s.length-1),h=l*i*(d/(Math.abs(d)||1)),{index:l,y:h}};ct=new WeakSet;At=function(t){var e;if(!((e=this.metaInfo.items)!=null&&e.length))return 0;const{itemHeight:i}=this.metaInfo;return-t*i};j=new WeakSet;vt=function(){let t=null;const{minScrollY:e,maxScrollY:i}=this.metaInfo;return tt(n(this,f),e,i)&&(t=n(this,f)>i?i:e),t};p=new WeakSet;I=function(t){const e=(t==null?void 0:t.duration)||0,i=(t==null?void 0:t.setProp)!==!1;a(this,K,e>0),i&&this.rootNode.style.setProperty("--picker-transit-duration",`${e}ms`)};S=new WeakSet;k=function(t){if(!this.rootNode||n(this,f)===t)return;this.rootNode.style.setProperty("--picker-transit-y",`${t}px`),a(this,f,t);const{items:e,itemHeight:i}=this.metaInfo;n(this,E)&&n(this,E).call(this,t,i,e)};G=new WeakSet;St=function(){var t,e;this.rootNode.classList.remove(xt),this.rootNode.classList.remove(Xt),a(this,v,null),(t=n(this,Y))==null||t.abort(),a(this,Y,null),(e=n(this,w))==null||e.abort(),a(this,w,null)};class fe{constructor(e,i){if(r(this,dt),r(this,z),r(this,kt),r(this,V),B(this,"rootNode"),B(this,"innerOptions"),r(this,u,[]),this.rootNode=typeof e=="string"?document.querySelector(e):e,!this.rootNode)throw new Error("root node not found");this.innerOptions={...Qt,...i},o(this,dt,Ft).call(this)}setIndexes(e){this.innerOptions.selectedIndexes=e;const i=[];return e.forEach((s,l)=>{n(this,u)[l]&&i.push(n(this,u)[l].setIndex(s))}),i}refreshAll(e){const i=this.rootNode.querySelectorAll(".mobile-picker-view");return i.length?(this.innerOptions.selectedIndexes.length=i.length,n(this,u).forEach(s=>s.destroy()),n(this,u).length=i.length,this.refreshColumns(n(this,u).map((s,l)=>l),e)):o(this,V,ut).call(this)}refreshColumns(e,i){const s=this.rootNode.querySelectorAll(".mobile-picker-view");return s.length?(e.forEach(l=>{const h=s[l];h&&n(this,u)[l]&&(n(this,u)[l].destroy(),n(this,u)[l]=o(this,z,It).call(this,h,i||this.innerOptions.selectedIndexes,l))}),this.innerOptions.selectedIndexes=n(this,u).map(l=>l.innerSelectedIndex),this.innerOptions.selectedIndexes):o(this,V,ut).call(this)}}u=new WeakMap;dt=new WeakSet;Ft=function(t){var e,i;const s=this.rootNode.querySelectorAll(".mobile-picker-view");this.innerOptions.selectedIndexes.length=s.length,s.forEach((h,d)=>{const c=o(this,z,It).call(this,h,t||this.innerOptions.selectedIndexes,d);n(this,u).push(c)}),this.innerOptions.selectedIndexes=n(this,u).map(h=>h.innerSelectedIndex);const l=((i=(e=n(this,u)[0])==null?void 0:e.metaInfo)==null?void 0:i.itemHeight)||0;l>0&&this.rootNode.style.setProperty("--picker-item-height",`${l}px`)};z=new WeakSet;It=function(t,e,i){return new de(t,{...this.innerOptions,selectedIndex:e[i],onChange:(l,h)=>{o(this,kt,qt).call(this,l,h,i)}})};kt=new WeakSet;qt=function(t,e,i){var s,l;this.innerOptions.selectedIndexes[i]=t,(l=(s=this.innerOptions).onChange)==null||l.call(s,this.innerOptions.selectedIndexes,e,i)};V=new WeakSet;ut=function(){return this.innerOptions.selectedIndexes=[],n(this,u).forEach(t=>t.destroy()),a(this,u,[]),[]};export{fe as P};
